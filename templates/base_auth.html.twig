<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="icon" href="{{ asset('assets/images/favicon.png') }}" />
    <title>{% block title %}Authentification | Agent IA{% endblock %}</title>
    <link rel="stylesheet" href="{{ asset('assets/css/output.css') }}" />
    <link rel="stylesheet" href="{{ asset('assets/css/tentatio.css') }}" />
    {% block stylesheets %}{% endblock %}
</head>
<body
    class="dark:bg-dark-secondary"
    x-data="{      
       mobileMenuOpen: false,
        activeDropdown: null,
        darkMode: localStorage.getItem('darkMode') === 'true',
        toggleDarkMode() {
          this.darkMode = !this.darkMode;
          localStorage.setItem('darkMode', this.darkMode);
          if (this.darkMode) {
            document.documentElement.classList.add('dark');
            document.documentElement.classList.remove('light');
          } else {
            document.documentElement.classList.add('light');
            document.documentElement.classList.remove('dark');
          }
        },
        toggleDropdown(dropdown) {
          if (window.innerWidth < 1024) {
            this.activeDropdown = this.activeDropdown === dropdown ? null : dropdown;
          }
        },
        closeDropdowns() {
          this.activeDropdown = null;
        },
        init() {
          // Apply dark mode on page load if saved in localStorage
          const savedDarkMode = localStorage.getItem('darkMode') === 'true';
          if (savedDarkMode) {
            this.darkMode = true;
            document.documentElement.classList.add('dark');
            document.documentElement.classList.remove('light');
          } else {
            this.darkMode = false;
            document.documentElement.classList.add('light');
            document.documentElement.classList.remove('dark');
          }
          // Close dropdowns when clicking outside
          document.addEventListener('click', (e) => {
            if (!e.target.closest('.nav-item') && !e.target.closest('.dropdown-menu') && !e.target.closest('.mobile-dropdown-toggle')) {
              this.closeDropdowns();
            }
          });
          // Reset activeDropdown when resizing to desktop
          window.addEventListener('resize', () => {
            if (window.innerWidth >= 1024) {
              this.activeDropdown = null;
              this.mobileMenuOpen = false;
            }
          });
        }
      }"
>
    <div class="dark:bg-dark-secondary min-h-screen flex flex-col justify-between">
        <!-- Header Start -->
        <header class="bg-white dark:bg-dark-primary border-b dark:border-gray-800 border-gray-100 sticky top-0 z-50 py-4 lg:py-0">
            <div class="px-4 sm:px-6 lg:px-7">
                <div class="flex items-center justify-between">
                    <!-- Logo and Mobile Menu Button -->
                    <div class="flex items-center">
                        <a href="{{ path('home_page') }}">
                          <img src="{{ asset('assets/images/logo.png') }}" class="block dark:hidden w-12 h-8" alt=""/>
                          <img src="{{ asset('assets/images/logo.png') }}" class="hidden dark:block w-12 h-8" alt=""/>
                        </a>
                    </div>
                    <!-- Desktop Navigation -->
                    <nav class="hidden lg:flex lg:items-center">
                        <a href="{{ path('home_page') }}" class="text-gray-500 dark:text-gray-400 text-sm px-4 py-6 hover:text-primary-500 font-medium">Accueil</a>
                        <a href="#" class="text-gray-500 dark:text-gray-400 text-sm px-4 py-6 hover:text-primary-500 font-medium">Contact</a>
                    </nav>
                    <!-- Right side buttons -->
                    <div class="flex items-center gap-4">
                        <!-- Theme toggle -->
                        <button @click="toggleDarkMode()" class="inline-flex items-center dark:hover:bg-white/5 dark:hover:text-white/90 hover:bg-gray-100 hover:text-gray-800 text-gray-500 dark:text-gray-400 justify-center border border-gray-200 dark:border-gray-700 rounded-full size-11">
                            <svg x-show="!darkMode" xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 20 20" fill="none">
                                <path d="M6.24683 7.08492C6.24683 10.7677 9.23232 13.7532 12.9151 13.7532C14.6687 13.7532 16.2641 13.0764 17.4545 11.9697C16.584 15.2727 13.5765 17.7083 10.0001 17.7083C5.74289 17.7083 2.29175 14.2572 2.29175 9.99996C2.29175 6.42356 4.72736 3.41602 8.03036 2.54558C6.92367 3.73594 6.24683 5.33139 6.24683 7.08492Z" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" />
                            </svg>
                            <svg x-show="darkMode" class="h-5 w-5" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z" />
                            </svg>
                        </button>
                        <!-- User/Account dropdown -->
                        {% if app.user %}
                          <div class="relative flex-shrink-0" x-data="{ open: false }">
                            <button @click="open = !open" class="rounded-full text-sm font-medium focus:outline-none">
                              <img src="{{ asset('assets/images/users/user-1.png') }}" class="w-11 h-11 rounded-full" alt="" />
                            </button>
                            <div x-show="open" @click.away="open = false" class="origin-top-right absolute right-0 mt-2 w-[260px] shadow-lg dark:bg-dark-secondary dark:border-gray-800 py-4 px-3 bg-white border border-gray-200 rounded-2xl">
                              <div class="mb-2 font-semibold text-gray-800 dark:text-white/90">{{ app.user.firstName }} {{ app.user.lastName }}</div>
                              <div class="mb-4 text-xs text-gray-500">{{ app.user.email }}</div>
                              <a href="{{ path('profile_page') }}" class="block py-2 text-sm text-gray-700 dark:text-gray-300 hover:text-primary-500">Profile</a>
                              <a href="{{ path('settings_page') }}" class="block py-2 text-sm text-gray-700 dark:text-gray-300 hover:text-primary-500">Settings</a>
                              <form method="post" action="{{ path('app_logout') }}">
                                <button type="submit" class="block w-full text-left py-2 text-sm text-red-600 hover:text-red-800">Logout</button>
                              </form>
                            </div>
                          </div>
                        {% else %}
                          <a href="{{ path('app_login') }}" class="text-sm hidden lg:block font-medium text-gray-700 dark:text-gray-400 hover:text-primary-500">Sign In</a>
                          <a href="{{ path('app_register') }}" class="lg:inline-flex items-center px-5 py-3 gradient-btn hidden text-sm text-white rounded-full button-bg h-11">Get Started Free</a>
                        {% endif %}
                    </div>
                </div>
            </div>
        </header>
        <!-- Header End -->
        <main>
            {% block body %}{% endblock %}
        </main>
        <!-- Footer Start -->
        <footer class="relative overflow-hidden bg-gray-900 mt-10">
            <div class="relative z-10 py-8 xl:py-12">
                <div class="container px-5 mx-auto sm:px-7">
                    <div class="flex flex-col items-center justify-center">
                        <a href="{{ path('home_page') }}" class="block mb-4">
                          <img src="{{ asset('assets/images/logo.png') }}" class="block w-12 h-8" alt=""/>
                        </a>
                        <p class="block text-sm text-gray-400 mb-4 text-center">
                            Planifiez vos voyages plus intelligemment, plus rapidement et sans effort<br>avec notre Planificateur de Voyage IA - Votre compagnon de voyage intelligent.
                        </p>
                        <div class="flex gap-2">
                            <!-- Social icons here -->
                        </div>
                        <p class="text-xs text-gray-500 mt-4">&copy; {{ "now"|date("Y") }} Planificateur de Voyage IA - Tous droits réservés.</p>
                    </div>
                </div>
            </div>
        </footer>
        <!-- Footer End -->
    </div>
    <script defer src="{{ asset('assets/js/alpine.min.js') }}"></script>
    <script defer src="{{ asset('assets/js/app.js') }}"></script>
    {% block javascripts %}{% endblock %}
</body>
</html> 